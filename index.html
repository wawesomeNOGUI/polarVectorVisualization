<html>
<body style="margin: 0; padding: 0; overflow: hidden; background-color: rgb(255, 255, 255);">
    <center>
        <!-- TODO: Add user inputs to redraw in realtime <input id=""></input> -->
        <canvas id="myCanvas" style="margin: 0; padding: 0; background-color: rgb(0, 0, 0);"></canvas>
    </center>
<script>

//===================Settings=======================
const lineWidth = 2;
const vectorsPerRotation = 20; // how many vectors to draw in one rotation
const numOfRings = 5; // how many rings of vectors to draw
const ringSpacing = 50; // spacing between rings
var angStep = 2*Math.PI / vectorsPerRotation;

// for vector A we have the radial component Ar and the angle component Ap (A phi)
// *** maybe add user input later but right now just hardcode in render loop so can have Ar and Ap depend on phi
// var Ar = 10;
// var Ap = 10;
//==================================================

var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
canvas.width = 500;
canvas.height = 500;
canvas.style.width = ""+ window.innerHeight +"px";   // stretch canvas to fit screen
canvas.style.height = ""+ window.innerHeight +"px"; // ***TODO: maybe stretch canvas to always have correct ratio as game instead of fullscreen
// ctx.imageSmoothingEnabled = false;

// put canvas origin in middle and flip canvas so positive y-axis is up
ctx.translate(canvas.width/2, canvas.height/2);
// ctx.rotate(Math.PI);
ctx.scale(1,-1);

// draw axis
ctx.fillStyle = "#FF0000";
ctx.fillRect(0, -canvas.height/2, 1, canvas.height);
ctx.fillRect(-canvas.width/2, 0, canvas.width, 1);

// draw axis labels (rotate to make text correct way)
ctx.scale(1,-1);
ctx.font = "20px Courier";
ctx.fillText("Y", 0, -canvas.height/2 + 20);
ctx.fillText("X", canvas.width/2 - 20, -5);
ctx.scale(1,-1);

// ctx.fillRect(15, 15, 5, 5);

// draw vector field created by the polar vector (similar to cylindrical, but just ignoring z component)
ctx.fillStyle = "#00FF00";

for (var i = 1; i < numOfRings; i++) {
    var phi = 0;

    for (var j = 0; j < vectorsPerRotation; j++) {
        // set vector components for vecotor A, can be constant or depend on phi
        // var Ar = 10;
        // var Ap = 10;

        // example of constant vector from example 1.19 in Engineering Electromagnetics 4th edition - Nathan Ida
        var Ar = 1/3 * (2 * Math.cos(phi) + Math.sin(phi));
        var Ap = -1/3 * (2 * Math.sin(phi) - Math.cos(phi));

        // scale Ap and Ar to make visible
        Ar *= 20;
        Ap *= 20;

        var r = ringSpacing * i;

        var x1 = Math.cos(phi) * r; // tail of vector
        var y1 = Math.sin(phi) * r;

        // // phi unit vector perpendicular to r counterclockwise
        // var Up = x1

        // var x2 = x1 + ; // head of vector
        // var y2 = Math.sin(phi) * r;

        ctx.fillRect(x1, y1, lineWidth, lineWidth);

        // polar unit vectors (non constant since depend on phi)
        var rX = Math.cos(phi);
        var rY = Math.sin(phi);
        var phiX = -rY;
        var phiY = rX;

        // draw r unit vector and phi unit vector (scale up a bit to make visible)
        ctx.fillRect(x1 + rX*5, y1 + rY*5, lineWidth, lineWidth);
        ctx.fillRect(x1 + phiX*5, y1 + phiY*5, lineWidth, lineWidth);

        // find head of vector using the phi and r components
        var vX = rX * Ar + phiX * Ap;
        var vY = rY * Ar + phiY * Ap;

        // draw vector at rendered point to visulize
        ctx.lineWidth = lineWidth;
        ctx.strokeStyle = "#FF00FF";
        ctx.beginPath(); // Start a new path
        ctx.moveTo(x1, y1); // Move the pen to tail of vecotr
        ctx.lineTo(x1 + vX, y1 + vY); // Draw a line to head of vector
        ctx.stroke(); // Render the path    

        phi += angStep;
    }
}



// setInterval(render, 10);
// gameLoop();

window.addEventListener("resize", function(e) {
    canvas.style.width = ""+ window.innerHeight +"px";
    canvas.style.height = ""+ window.innerHeight +"px";
});

window.addEventListener("contextmenu", function(e) {
    e.preventDefault();   //stops right click bringing up a menu
});

</script>
</body>
</html>